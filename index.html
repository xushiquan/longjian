<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width" />
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title>智慧工地</title>
		<link rel="stylesheet" type="text/css" href="./css/api.css" />
		<style type="text/css">
			html, body {
				height: 100%;
			}
			.wrap {
				display: -webkit-box;
				-webkit-box-orient: vertical;
				-webkit-flex-flow: column;
			}
			header {
				height: 44px;
				width: 100%;
				text-align: center;
				background-color: #81a9c3;
				color: #fff;
				line-height: 44px;
				font-size: 20px;
			}
			.flex-1 {
				-webkit-box-flex: 1;
				-webkit-flex: 1;
			}
			footer {
				height: 30px;
				width: 100%;
				background-color: #81a9c3;
				color: white;
				line-height: 30px;
				text-align: center;
			}
		</style>
	</head>
	<body class="wrap">
		<div id="main"></div>
	</body>
	<script type="text/javascript" src="./script/api.js"></script>
	<script type="text/javascript">
		apiready = function() {
			// 1.修复开启沉浸式效果带来的顶部Header与手机状态栏重合的问题，最新api.js方法已支持适配iPhoneX；
			// 2.默认已开启了沉浸式效果 config.xml中 <preference name="statusBarAppearance" value="true"/>
			// 3.沉浸式效果适配支持iOS7+，Android4.4+以上版本
			api.getPrefs({
				key : 'loginInfo'
			}, function(ret, err) {
				if (ret) {
					api.openWin({
						name : 'main',
						url : 'html/system/main.html',
						slidBackEnabled : false
					});
				} else {
					// 打开登录Window
					api.openWin({
						name : 'login',
						url : 'html/system/login.html',
						slidBackEnabled : false
					});
				}
			});
		};
	</script>
</html>
